<div class="container bg-card justify-content-left">
<%= image_tag "kiez-logo.svg", alt: "KIEZ logo", width: 35 %></div>
<div class="container text-center">
  <div>
    <%= link_to new_post_path(kind_of_post: "neighborhood"), class: "btn" do %>
    <i class="fa-solid fa-plus"></i>
    <% end %>
  </div>

  <div class="mb-3 search-form-control form-group mt-10 justify-content-left" >
    <%= form_with url: posts_path, method: :get, class: "d-flex" do %>
      <%= hidden_field_tag :kind_of_post, "neighborhood" %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "give a hand to a neighbor"
      %>
      <%= submit_tag "Search", class: "btn btn-secondary" %>
    <% end %>
  </div>
</div>
<div class="container grid">
  <div class= "btn red-round"><%=link_to "Lost Item", posts_path(:category => "Lost Item", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Lost Pet", posts_path(:category => "Lost Pet", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Giveaway", posts_path(:category => "Giveaway", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Moving", posts_path(:category => "Moving", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Announcement", posts_path(:category => "Announcement", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Furniture Assembly", posts_path(:category => "Furniture Assembly", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Appliance Repair", posts_path(:category => "Appliance Repair", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Housesitting", posts_path(:category => "Housesitting", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Language Exchange", posts_path(:category => "Language Exchange", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Recommendation", posts_path(:category => "Recommendation", :kind_of_post => "neighborhood")%></div>
  <div class= "btn red-round"><%=link_to "Workshop", posts_path(:category => "Workshop", :kind_of_post => "neighborhood")%></div>
</div>
<div class="container text-center">
  <div class= "m-3 btn btn-success"><%=link_to "All Projects Near Me", posts_path( :kind_of_post => "neighborhood")%></div>
</div>
<div class="container text-center">
  <div style="width: 100%; height: 300px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-user-location-value="<%= @user_location %>"
    data-map-api-key-value="<%= ENV["MAPBOX_API_KEY"]%>">
  </div>
</div>
<div class="container mt-3">
  <div class="wrapper">
    <% posts.each do |post| %>
      <div class="custom-card">
        <div class= "left">
            <%# <% if post.photo.attached? %>
              <%# <%= cl_image_tag post.photo.key,  style: "object-fit: cover; height: 150px;", alt: "post-picture", crop: :fill, gravity: :face %>
            <%# <% else %>
              <%# <%= image_tag "chair.jpg", style: "object-fit: cover; height: 150px; margin-right: 15px; ", alt: "post-picture", crop: :fill, gravity: :face %>
            <%# <% end %>
        </div>
        <div class= "right" style="padding: 10px">
          <div class="header">
            <div class="red-round"><h5><%= post.category %></h5></div>
            <% bookmark = Bookmark.find_by(user: current_user, post: post) %>
            <i class="fa-<%= bookmark.present? ? "solid" : "regular" %> fa-bookmark"
             data-controller="bookmark"
             data-action="click->bookmark#change"
             data-bookmark-id="<%= bookmark&.id  %>"
             data-post-id="<%= post.id %>"
             data-scrf-token="<%= form_authenticity_token %>"
             ></i>
          </div>
          <h5><%= link_to post.title, post_path(post) %></h5>
          <div class= "card-footer">
            <p><%= post.content %></p>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
