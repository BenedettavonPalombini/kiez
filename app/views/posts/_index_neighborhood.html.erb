
<div class="container text-center">
  <div>
    <h1><strong>Kiez</strong></h1>
    <%= link_to new_post_path(kind_of_post: "neighborhood"), class: "btn" do %>
    <i class="fa-solid fa-plus"></i>
    <% end %>
  </div>

  <div class="mb-3 search-form-control form-group mt-10 justify-content-left" >
    <%= form_with url: posts_path, method: :get, class: "d-flex" do %>
      <%= hidden_field_tag :kind_of_post, "neighborhood" %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "give a hand to a neighbor"
      %>
      <%= submit_tag "Search", class: "btn btn-secondary" %>
    <% end %>
  </div>
</div>
<div class="container grid">
  <div class= "btn btn-success"><%=link_to "Lost Item", posts_path(:category => "Lost Item", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Lost Pet", posts_path(:category => "Lost Pet", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Giveaway", posts_path(:category => "Giveaway", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Moving", posts_path(:category => "Moving", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Announcement", posts_path(:category => "Announcement", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Furniture Assembly", posts_path(:category => "Furniture Assembly", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Appliance Repair", posts_path(:category => "Appliance Repair", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Housesitting", posts_path(:category => "Housesitting", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Language Exchange", posts_path(:category => "Language Exchange", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Recommendation", posts_path(:category => "Recommendation", :kind_of_post => "neighborhood")%></div>
  <div class= "btn btn-success"><%=link_to "Workshop", posts_path(:category => "Workshop", :kind_of_post => "neighborhood")%></div>
</div>
<div class="container text-center">
  <div class= "m-3 btn btn-success"><%=link_to "All Projects Near Me", posts_path( :kind_of_post => "neighborhood")%></div>
</div>
<div class="container text-center">
  <div style="width: 100%; height: 300px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-user-location-value="<%= @user_location %>"
    data-map-api-key-value="<%= ENV["MAPBOX_API_KEY"]%>">
  </div>
</div>
<div class="container">
  <div class="row">
    <% posts.each do |post| %>
      <div class="col-lg-2 col-md-4 col-sm-12 bg-card bcard card card-body card-trip no-outline">
        <div class="d-flex align-items-start">
          <div class="d-flex img">
            <% if post.photo.attached? %>
              <%= cl_image_tag post.photo.key, height: 100, class: "image-fluid", style: "object-fit: cover", alt: "post-picture", crop: :fill, gravity: :face %>
            <% else %>
              <%= image_tag "chair.jpg", height: 100, class: "image-fluid", style: "object-fit: cover", alt: "post-picture", crop: :fill, gravity: :face %>
            <% end %>
          </div>
          <div class="d-flex">
            <%= link_to post.title, post_path(post) %>
          </div>
          <div class="d-flex">
            <%= post.category %>
          </div>
          <div class="d-flex">
            <%= post.content %>
          </div>
        </div>
        <div class="col">
          <% bookmark = Bookmark.find_by(user: current_user, post: post) %>
          <i class="fa-<%= bookmark.present? ? "solid" : "regular" %> fa-bookmark"
             data-controller="bookmark"
             data-action="click->bookmark#change"
             data-bookmark-id="<%= bookmark&.id  %>"
             data-post-id="<%= post.id %>"
             data-scrf-token="<%= form_authenticity_token %>"
             ></i>
        </div>
      </div>
    <% end %>
  </div>
</div>
